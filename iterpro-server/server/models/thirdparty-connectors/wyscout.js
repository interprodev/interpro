const axiosRetry = require('axios-retry');
const axiosLib = require('axios');
const { v4: uuid } = require('uuid');
const moment = require('moment');
const { baseURLv2, baseURL } = require('../../../config/wyscout.config.json');
const { retries } = require('../../../config/axiosRetry.config.json');
const { UnprocessableEntityError, BadRequestError, InternalError } = require('../../../common/modules/error');
const { countBy, isEmpty, pick, uniq, uniqBy, sortBy, flatten, max, omit, partition } = require('lodash');
const Promise = require('bluebird');
const wyscoutCompetitions = require('../../../config/wyscoutCompetitions.json');

const WyscoutAPIv2 = axiosLib.create({ baseURL: baseURLv2 });
const WyscoutAPI = axiosLib.create({ baseURL });
axiosRetry(WyscoutAPIv2, { retries, retryDelay: axiosRetry.exponentialDelay });

const wyscout = (module.exports = {
	getAllCompetitions: () => wyscoutCompetitions,

	getToken: function () {
		return `Basic ${Buffer.from(`${process.env.WYSCOUT_USERNAME}:${process.env.WYSCOUT_PASSWORD}`).toString('base64')}`;
	},

	/**
	 * Execute requests with v3 API
	 * if token is not provided, will be created on the fly, while encode refers to encodeURI */
	getRequest: function (url, { token, encode }) {
		return WyscoutAPI.get(encode ? encodeURI(url) : url, {
			headers: { Authorization: token || this.getToken() }
		});
	},

	getPlayers: async function (team, currentSeason, clubTeamsWyscoutIds) {
		try {
			const token = wyscout.getToken();
			let competitionsToSearch = [];
			let seasonsToSearch = [];
			if (!currentSeason) {
				throw UnprocessableEntityError('Current season undefined!');
			} else {
				if (!isEmpty(currentSeason.competitionInfo)) {
					currentSeason.competitionInfo
						.filter(info => info)
						.forEach(info => {
							competitionsToSearch = addElement(competitionsToSearch, info.competition);
							seasonsToSearch = addElement(seasonsToSearch, info.season);
						});
				}
				competitionsToSearch = addElement(competitionsToSearch, currentSeason.wyscoutNationalLeague);
				competitionsToSearch = addElement(competitionsToSearch, currentSeason.wyscoutNationalCup);
				competitionsToSearch = addElement(competitionsToSearch, currentSeason.wyscoutTournamentQualifiers);
				competitionsToSearch = addElement(competitionsToSearch, currentSeason.wyscoutTournamentFinalStages);

				const teamHistory = await getTeamHistory(team.wyscoutId, token);
				seasonsToSearch.push(...teamHistory.map(({ seasonId }) => seasonId));
				const players$ = [
					...(clubTeamsWyscoutIds || []).map(wyscoutId => getSquadSeasonPlayers(wyscoutId, null, token)),
					...uniq(competitionsToSearch).map(competition => getCompetitionPlayers(competition, token)),
					...uniq(seasonsToSearch).map(season => getSquadSeasonPlayers(team.wyscoutId, season, token))
				];

				const playersFromAPI = uniqBy(flatten(await Promise.all(players$)), 'wyId');

				const responsePlayers = playersFromAPI.map(player => ({
					_id: player.wyId,
					playerKey: 'wyscoutId',
					...pick(player, ['firstName', 'shortName', 'middleName', 'lastName', 'height', 'weight', 'birthDate']),
					secondaryWyscoutId:
						team.wyscoutId === player.currentTeamId ? player.currentNationalTeamId : player.currentTeamId
				}));

				return sortBy(responsePlayers, el => el.shortName);
			}
		} catch (error) {
			console.error(`[WYSCOUT] ERROR while retrieving players for team ${team.id}`);
			throw error;
		}
	},

	getIterproAvatarBase64: function () {
		// eslint-disable-next-line max-len
		return 'data:image/png;base64,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';
	},

	getStandingsLeaderboard: async function (seasonId) {
		try {
			const token = wyscout.getToken();
			const response = await wyscout.getStandingsForSeason(seasonId, token);
			return response;
		} catch (e) {
			console.error(e);
			throw e;
		}
	},

	getStandingsMatchList: async function (teamId, seasonId) {
		try {
			const token = wyscout.getToken();
			const results = await wyscout.getMatchesForSeason(seasonId, token);
			const matches = await Promise.all(
				results
					.filter(
						({ match }) => !!match && !!match.teamsData && Object.keys(match.teamsData).map(Number).includes(teamId)
					)
					.map(({ match, goals }) => wrapMatchForStandingsList({ ...match, goals }, teamId, token))
			);
			return sortBy(matches, 'gameweek');
		} catch (e) {
			console.error(e);
			throw e;
		}
	},

	getStandingsMatchStats: async function (matchId, req) {
		try {
			const token = wyscout.getToken();
			const match = await wyscout.getSingleMatch(matchId, token, true, true);
			const [matchList, ...stats] = await Promise.all([
				wyscout.getCachedMatchList(match.seasonId, req),
				wyscout.getTeamStatsForMatch(Object.values(match.teamsData)[0].teamId, matchId, token),
				wyscout.getTeamStatsForMatch(Object.values(match.teamsData)[1].teamId, matchId, token)
			]);
			const found = (matchList || []).find(({ wyId }) => wyId === matchId) || { goals: [] };
			return wrapMatchForStatsDetails(match, stats, found.goals);
		} catch (e) {
			console.error(e);
			throw e;
		}
	},

	getCachedMatchList: async function (seasonId, req) {
		const redisCopyClient = Object.create(req.app.redisClient);
		const asyncRedis = require('async-redis');
		const asyncClient = asyncRedis.decorate(redisCopyClient);
		const keys = await asyncClient.keys('*getStandingsMatchList*');
		const cacheKey = keys.find(key => key.match(seasonId));
		const statsValue = await asyncClient.get(cacheKey);
		return JSON.parse(statsValue);
	},

	// DEPRECATED
	dashboard: async function (_teamId, wyscoutTeamId, _wyscoutCompetitionId, wyscoutSeasonId) {
		const response = {};
		// first teamStats
		const token = wyscout.getToken();
		// eslint-disable-next-line prefer-const
		let [resultMatches, resultStandings] = await Promise.all([
			wyscout.getMatchesForSeason(wyscoutSeasonId, token),
			wyscout.getStandingsForSeason(wyscoutSeasonId, token)
		]);

		const allTeams = [];
		if (!isEmpty(resultStandings.teams)) {
			// const currentTeamGroup = resultStandings.teams.find(({ teamId }) => teamId === wyscoutTeamId);
			// const filteredStandingTeams = resultStandings.teams.filter(({ groupName }) => groupName === currentTeamGroup.groupName);
			// if (filteredStandingTeams.length > 0) {
			// 	resultStandings.teams = filteredStandingTeams;
			// }
			const promiseArray = (resultStandings.teams || [])
				.filter(({ team }) => team)
				.map(({ teamId }) => wyscout.getTeamWithImage(teamId, token));
			const res = await Promise.all(promiseArray);

			for (const stand of resultStandings.teams) {
				if (stand.team) {
					const img = res.find(x => x && x.wyId === stand.teamId);
					stand.team.imageDataURL = img && img.imageDataURL ? img.imageDataURL : null;
					allTeams.push(stand.team);
				} else {
					allTeams.push({ wyId: Number(stand.teamId), name: stand.teamId, imageDataURL: wyscout.iterproBase64 });
					stand.team = { wyId: Number(stand.teamId), name: stand.teamId, imageDataURL: wyscout.iterproBase64 };
				}
			}
		}
		resultMatches = resultMatches.filter(
			({ match }) => !!match && !!match.teamsData && Object.keys(match.teamsData).map(Number).includes(wyscoutTeamId)
		);
		for (const singleMatch of resultMatches) {
			singleMatch.matchId = Number(singleMatch.matchId);
			singleMatch.wyId = singleMatch.matchId;
			if (singleMatch.match) {
				singleMatch.label = singleMatch.match.label;
				singleMatch.date = singleMatch.match.date;
				singleMatch.dateutc = singleMatch.match.dateutc;
				singleMatch.status = singleMatch.match.status;
				singleMatch.duration = singleMatch.match.duration;
				singleMatch.winner = Number(singleMatch.match.winner);
				singleMatch.winner = Number(singleMatch.match.winner);
				singleMatch.competitionId = Number(singleMatch.match.competitionId);
				singleMatch.seasonId = Number(singleMatch.match.seasonId);
				singleMatch.roundId = Number(singleMatch.match.roundId);
				singleMatch.gameweek = Number(singleMatch.match.gameweek);
				if (singleMatch.match.teamsData) {
					const teamsIds = Object.keys(singleMatch.match.teamsData);
					if (teamsIds && teamsIds.length > 1) {
						singleMatch.team1 = Number(teamsIds[0]);
						singleMatch.team2 = Number(teamsIds[1]);
					}
				}
				singleMatch.matchInfo = singleMatch.match;
				delete singleMatch.match;
			}
		}

		// get last match played 2018-05-20 18:00:00
		// const playedMatches = resultMatches.filter(({ status }) => status === 'Played');
		// playedMatches.sort(
		// 	(d1, d2) =>
		// 		moment(d2.date, 'YYYY-MM-DD HH:mm:ss').toDate().getTime() -
		// 		moment(d1.date, 'YYYY-MM-DD HH:mm:ss').toDate().getTime()
		// );

		// const firstMatch = playedMatches && playedMatches.length > 0 ? playedMatches[0] : null;
		// if (firstMatch) {
		// 	response.firstTeamStats = [];
		// 	response.firstTeamStats.push(null);
		// 	response.firstTeamStats.push(null);
		// 	response.firstMatch = firstMatch;
		// }

		response.leaderboard = resultStandings;
		response.teams = allTeams;
		response.competition = resultStandings.competition;
		response.matches = resultMatches;

		return response;
	},

	// DEPRECATED (used only in scouting event store effects, removed after refactoring)
	dashboardSingleTeamStat: async function (matchId, team1, team2) {
		try {
			const token = wyscout.getToken();
			const response = {
				teamStats: []
			};
			const results = [];
			results[0] = await wyscout.getTeamStatsForMatch(team1, matchId, token);
			results[1] = await wyscout.getTeamStatsForMatch(team2, matchId, token);
			for (const stats of results) {
				if (stats) {
					response.teamStats.push({ ...stats, matchId: Number(matchId) });
				} else {
					console.warn('No data for match %s', matchId);
				}
			}
			return response;
		} catch (e) {
			console.error(e);
			throw e;
		}
	},

	// TODO: merge with singleTeamStatWithPlayersa and use a parameter for discriminating them
	singleTeamStat: async function (wyscoutMatchId) {
		const token = wyscout.getToken();
		let response;
		try {
			response = await wyscout.getSingleMatch(wyscoutMatchId, token);
			const teamsWyIds = Object.keys(response.teamsData);
			const teams = await Promise.all(teamsWyIds.map(wyId => wyscout.getTeamWithImage(wyId, token)));
			teamsWyIds.forEach(teamId => {
				const team = teams.find(({ wyId }) => wyId === Number(teamId));
				if (team && team.imageDataURL) {
					response.teamsData[teamId].imageDataURL = team.imageDataURL;
					response.teamsData[teamId].teamName = team.name;
				}
			});
		} catch (e) {
			console.error('[wyscout.singleTeamStat] Failed request singleTeamStat');
		}
		return response;
	},

	singleTeamStatWithPlayers: async function (wyscoutMatchId) {
		const token = wyscout.getToken();
		let response;
		try {
			response = await wyscout.getSingleMatchWithPlayers(wyscoutMatchId, token);
			const teamsWyIds = Object.keys(response.teamsData);
			const teams = await Promise.all(teamsWyIds.map(wyId => wyscout.getTeamWithImage(wyId, token)));
			teamsWyIds.forEach(teamId => {
				const team = teams.find(({ wyId }) => wyId === Number(teamId));
				if (team && team.imageDataURL) {
					response.teamsData[teamId].imageDataURL = team.imageDataURL;
					response.teamsData[teamId].teamName = team.name;
				}
			});
		} catch (e) {
			console.error('[wyscout.singleTeamStatWithPlayers] Failed request singleTeamStatWithPlayers');
		}
		return response;
	},

	gamePlayerStats: async function (wyscoutMatchId, playersWyIds, substitutions) {
		const token = wyscout.getToken();
		let playerStats = [];
		try {
			const stats = await wyscout.getMatchAdvancedPlayerStats(wyscoutMatchId, token);
			playerStats = playersWyIds.map(({ playerId, teamsThirdPartyId, playerName }) => {
				const playerStat = (stats || [])?.find(stat => stat.playerId === playerId);
				return !!playerStat && !!playerStat.total
					? wrapPlayerMatchStats(
							{
								playerId,
								playerName,
								downloadUrl: playerStat.player?.imageDataURL,
								teamId: playerStat.player?.currentTeamId
							},
							playerStat.total,
							{ wyscoutId: playerId },
							{ formation: { substitutions: substitutions[teamsThirdPartyId] } }
					  )
					: getEmptyMatchPlayerStat({ id: playerId, displayName: playerName });
			});
			return playerStats.filter(({ stack }) => !stack);
		} catch (e) {
			console.error('[wyscout.gamePlayerStats] Failed request gamePlayerStats');
			throw e;
		}
	},

	matchesForSeason: async function (seasonId, date = new Date()) {
		const token = wyscout.getToken();
		const fromDate = moment(date).subtract(2, 'days').format('YYYY-MM-DD');
		const toDate = moment(date).add(2, 'days').format('YYYY-MM-DD');
		// console.log(fromDate, toDate);
		try {
			const response = await wyscout.getRequest(
				'/seasons/' + seasonId + '/fixtures?&details=matches,players&fromDate=' + fromDate + '&toDate=' + toDate,
				{
					token
				}
			);
			return response && response.data && response.data.matches && response.data.matches.length > 0
				? response.data.matches
				: [];
		} catch (error) {
			console.error(error);
			return [];
		}
	},

	squadSeasonPlayers: async function (squadIds, seasonId) {
		const token = wyscout.getToken();
		try {
			const response = await Promise.map(
				squadIds,
				async teamId => {
					const players = await getSquadSeasonPlayers(teamId, seasonId, token);
					return { teamId, players };
				},
				{ concurrency: 12 }
			);
			return response.filter(({ stack }) => !stack);
		} catch (error) {
			console.error(error);
			return [];
		}
	},

	playerImage: async function (thirdPartyIds) {
		const token = wyscout.getToken();
		try {
			const response = await Promise.map(
				thirdPartyIds,
				async thirdPartyId => {
					const image = await wyscout.getPlayerImage(thirdPartyId, token);
					return { thirdPartyId, image };
				},
				{ concurrency: 12 }
			);
			return response.filter(({ stack }) => !stack);
		} catch (error) {
			console.error(error);
			return [];
		}
	},

	wyscoutCompetitionTeams: async function (wyscoutCompetitionId, teamId) {
		let teams = [];
		const token = wyscout.getToken();
		if (wyscoutCompetitionId) {
			const teamsData = await wyscout.getRequest('/competitions/' + wyscoutCompetitionId + '/teams', { token });
			teams = teamsData.data && teamsData.data.teams && teamsData.data.teams.length > 0 ? teamsData.data.teams : [];
			const res = await Promise.all(teams.map(team => wyscout.getTeamWithImage(team.wyId, token)));
			for (const team of teams) {
				const img = res.find(x => x && x.wyId === team.wyId);
				team.imageDataURL = img && img.imageDataURL ? img.imageDataURL : null;
				team.imageDataURL = team.imageDataURL ? team.imageDataURL : wyscout.getIterproAvatarBase64();
			}
		}
		return { teams: teams };
	},

	careerTransfers: async function (wyscoutPlayerId) {
		const token = wyscout.getToken();
		const careerData = await wyscout.getPlayerCareer(wyscoutPlayerId, token);
		const transfersData = await wyscout.getPlayerTransfers(wyscoutPlayerId, token);
		return {
			wyscoutId: wyscoutPlayerId,
			career: careerData && careerData.length > 0 ? careerData : [],
			transfers: transfersData && transfersData.length > 0 ? transfersData : []
		};
	},

	teamSearch: async function (query, competitionIds, gender, req) {
		const token = wyscout.getToken();
		query = query.replace(/\//g, '');
		const searchResponse = await wyscout.getRequest(
			`/search?query=${query}&objType=team${gender === 'female' ? '&gender=women' : ''}`,
			{
				encode: true,
				token
			}
		);
		const result = searchResponse.data && searchResponse.data.length > 0 ? searchResponse.data : [];
		const teams = await Promise.all(result.map(item => wyscout.getTeamWithImage(item.wyId, token, req)));
		return result.map(({ wyId, name }) => {
			const team = teams.find(img => !!img && img.wyId === wyId);
			const crest = team && team.imageDataURL ? team.imageDataURL : wyscout.getIterproAvatarBase64();
			return { name, wyscoutId: wyId, crest };
		});
	},

	searchPlayers: async function (playerName, competitions, nationalities, ageMin, ageMax, positions, gender) {
		try {
			let playersFound = [];
			const token = wyscout.getToken();
			if (!isEmpty(playerName)) {
				const { data } = await wyscout.getRequest(
					`/search?query=${playerName}&objType=player${gender === 'female' ? '&gender=women' : ''}`,
					{ encode: true, token }
				);
				playersFound = data && data.length > 0 ? data : [];
				for (const player of playersFound) {
					if (player.currentTeamId) player.currentTeam = await wyscout.getTeamData(player.currentTeamId, token);
				}
			} else if (!competitions || competitions.length === 0) {
				throw new BadRequestError(
					'No competitions provided: in order to request data to Wyscout it is necessary to select at least one competition.'
				);
			} else {
				const toAdd = await wyscout.getPlayersForCompetition(competitions, token);
				playersFound = playersFound.concat(toAdd);
				if (nationalities && nationalities.length > 0) {
					playersFound = playersFound.filter(
						({ birthArea }) =>
							!birthArea ||
							(birthArea && !birthArea.alpha2code) ||
							(birthArea && nationalities.map(x => x.toLowerCase()).includes(birthArea.alpha2code.toLowerCase()))
					);
				}
				if (positions && positions.length > 0) {
					playersFound = playersFound.filter(
						({ role }) => !role || (role && positions.map(x => x.toLowerCase()).includes(role.code2.toLowerCase()))
					);
				}
				if (ageMin && ageMax && ageMin !== 0 && ageMax !== 0) {
					const dateMin = moment().subtract(ageMax, 'years');
					const dateMax = moment().subtract(ageMin, 'years');
					playersFound = playersFound.filter(
						({ birthDate }) => !birthDate || (birthDate && moment(birthDate, 'YYYY-MM-DD').isBetween(dateMin, dateMax))
					);
				}
			}
			return playersFound;
		} catch (e) {
			console.error(e);
			throw e;
		}
	},

	getPlayersForCompetition: async function (competitions, token) {
		let playersFound = [];
		for (const competitionId of competitions) {
			const { data } = await wyscout.getRequest(
				`/competitions/${competitionId}/players?details=currentTeam&limit=100`,
				{ token }
			);
			const { players, meta } = data;
			playersFound = playersFound.concat(players);
			const promises$ = [];
			for (let i = meta.page_current + 1; i <= meta.page_count; i++) {
				promises$.push(
					wyscout
						.getRequest(`/competitions/${competitionId}/players?details=currentTeam&limit=100&page=${i}`, { token })
						.then(({ data }) => data.players)
				);
			}
			const moreData = await Promise.all(promises$);
			playersFound = playersFound.concat(flatten(moreData));
		}
		return playersFound;
	},

	/**
	 * Wyscout V3 Api includes now the `imageDataURL` as direct link
	 * @param wyscoutId
	 * @param token
	 * @returns {Promise<null|*>}
	 */
	getPlayerImage: async function (wyscoutId, token) {
		try {
			const response = await wyscout.getRequest(`/players/${wyscoutId}?imageDataURL=1`, { token });
			let img = null;
			if (response && response.data && response.data.imageDataURL) {
				img = response.data.imageDataURL;
			}
			return img;
		} catch (error) {
			return error;
		}
	},

	/**
	 * Wyscout V3 always returns an `imageDataURL` field with direct link
	 * @param wyscoutId
	 * @param token
	 * @returns {Promise<any|null>}
	 */
	getTeamWithImage: async function (wyscoutId, token, req) {
		try {
			const response = await wyscout.getRequest('/teams/' + wyscoutId, { token });
			return response && response.data ? response.data : null;
		} catch (error) {
			return error;
		}
	},

	getStandingsForSeason: async function (seasonId, token) {
		try {
			const response = await wyscout.getRequest(
				'/seasons/' + seasonId + '/standings?&details=teams&fetch=competition',
				{ token }
			);
			return response && response.data && response.data.teams && response.data.teams.length > 0 ? response.data : [];
		} catch (error) {
			return error;
		}
	},

	getMatchesForSeason: async function (seasonId, token) {
		try {
			const response = await wyscout.getRequest('/seasons/' + seasonId + '/fixtures?&details=matches,players', {
				token
			});
			return response && response.data && response.data.matches && response.data.matches.length > 0
				? response.data.matches
				: [];
		} catch (error) {
			console.error(error);
			return [];
		}
	},

	getSingleMatch: async function (matchWyId, token, sides = false, details = false) {
		try {
			const response = await wyscout.getRequest(
				`/matches/${matchWyId}?useSides=${sides}${details ? `&details=competition,players,teams` : ``}`,
				{ token }
			);
			if (!response || !response.data) {
				throw InternalError('Received empty data');
			}
			return response.data;
		} catch (error) {
			console.error(error);
			return null;
		}
	},

	getSingleMatchWithPlayers: async function (matchWyId, token) {
		try {
			const response = await wyscout.getRequest(`/matches/${matchWyId}?&details=players,competition`, { token });
			if (!response || !response.data) {
				throw InternalError('Received empty data');
			}
			return response.data;
		} catch (error) {
			console.error(error);
			return null;
		}
	},

	getPlayerActiveTransfer: async function (wyscoutId, token) {
		try {
			const response = await wyscout.getRequest(`/players/${wyscoutId}/transfers`, { token });
			let transferData = null;
			if (response && response.data && response.data.transfer && response.data.transfer.length > 0) {
				transferData = response.data.transfer.find(
					({ active, endDate }) => active === true || active === 1 || endDate === '0000-00-00'
				);
			}
			return transferData;
		} catch (error) {
			return error;
		}
	},

	getPlayerCareer: async function (wyscoutId, token) {
		try {
			const response = await wyscout.getRequest('/players/' + wyscoutId + '/career?&details=team,competition,season', {
				token
			});
			return response && response.data && response.data.career && response.data.career.length > 0
				? response.data.career
				: [];
		} catch (error) {
			return error;
		}
	},

	getTeamData: async function (teamId) {
		try {
			const token = wyscout.getToken();
			const response = await wyscout.getRequest('/teams/' + teamId, { token });
			return response && response.data ? response.data : null;
		} catch (error) {
			return error;
		}
	},

	getPlayerTransfers: async function (wyscoutId, token) {
		try {
			const response = await wyscout.getRequest('/players/' + wyscoutId + '/transfers?&details=teams', {
				token
			});
			return response && response.data && response.data.transfer && response.data.transfer.length > 0
				? response.data.transfer
				: [];
		} catch (error) {
			return { data: null, error: error };
		}
	},

	playerSearchFilters: async function () {
		const competitionData = wyscoutCompetitions;
		return { competitions: competitionData.sort(), positions: ['FW', 'MD', 'DF', 'GK'] };
	},

	// playerSearchAdditionalInfo: async function (playerWyscoutIds) {
	// 	const token = wyscout.getToken();
	// 	const players = await Promise.map(
	// 		uniq(playerWyscoutIds),
	// 		async (playerWyscoutId) => {
	// 			const [careerData, transferData, imgData] = await Promise.all([
	// 				wyscout.getPlayerCareer(playerWyscoutId, token),
	// 				wyscout.getPlayerActiveTransfer(playerWyscoutId, token),
	// 				wyscout.getPlayerImage(playerWyscoutId, token)
	// 			]);
	// 			const transferValue = transferData ? transferData.value : null;
	// 			return { wyscoutId: playerWyscoutId, careerData: careerData, transferValue: transferValue, img: imgData };
	// 		},
	// 		{ concurrency: 2 }
	// 	);
	// 	return { players: players };
	// },

	// NB: had to revert this method implementation cause wyscout returns 429 even with a concurrency of 2
	playerSearchAdditionalInfo: async function (playerWyscoutIds) {
		const token = wyscout.getToken();
		const players = [];
		for (const wyscoutId of uniq(playerWyscoutIds)) {
			const [careerData, transferData, img] = await Promise.all([
				wyscout.getPlayerCareer(wyscoutId, token),
				wyscout.getPlayerActiveTransfer(wyscoutId, token),
				wyscout.getPlayerImage(wyscoutId, token)
			]);
			const transferValue = transferData?.value || null;
			players.push({ wyscoutId, careerData, transferValue, img });
		}

		return { players };
	},

	seasonsForCompetitions: async function (_teamId, competitionsIds, date) {
		const competitionData = [];
		const token = wyscout.getToken();
		if (competitionsIds && competitionsIds.length > 0) {
			for (const compId of competitionsIds) {
				const seasonsData = await wyscout.getRequest('/competitions/' + compId + '/seasons', { token });
				const allSeasons = (seasonsData.data?.seasons || []).map(({ season }) => season);
				let seasons = allSeasons;
				if (date) {
					seasons = allSeasons.filter(season =>
						moment(date).isBetween(moment(season.startDate), moment(season.endDate), 'days', '[]')
					);
				}
				const compObject = { compId, seasons };
				competitionData.push(compObject);
			}
		}
		return competitionData;
	},

	getCurrentSeasonMatches: async function (playerId, from, to) {
		const token = wyscout.getToken();
		try {
			const { currentNationalTeamId } = await wyscout.getPlayerDetails(playerId);
			const [responsePast, responseFuture] = await Promise.all([
				wyscout.getRequest(`/players/${playerId}/matches`, { token }),
				wyscout.getRequest(`/players/${playerId}/fixtures`, { token })
			]);
			let matches = [];
			if ((responsePast.data && responsePast.data.matches) || (responseFuture.data && responseFuture.data.matches)) {
				const pastMatches = wyscout.filterAndMap(responsePast, matches, from, to);
				const futureMatches = wyscout.filterAndMap(responseFuture, matches, from, to, true);
				matches = [...(pastMatches || []), ...(futureMatches || [])];
				if (currentNationalTeamId) {
					const futureNationalFixtures = await wyscout.getTeamFixtures(currentNationalTeamId, from, to);
					const nationalMatches = wyscout.filterAndMap(
						{ data: { matches: futureNationalFixtures } },
						matches,
						from,
						to,
						true
					);
					matches = [...(matches || []), ...(nationalMatches || [])];
				}
			}
			return matches;
		} catch (error) {
			return error;
		}
	},

	getPlayerNextGames: async function (playerId, from, to) {
		try {
			const clubFixtures = await wyscout.getPlayerClubFixtures(playerId, from, to);
			const { currentNationalTeamId } = await wyscout.getPlayerDetails(playerId);
			let nationalFixtures = [];
			if (currentNationalTeamId) {
				nationalFixtures = await wyscout.getTeamFixtures(currentNationalTeamId, from, to);
			}
			return [...(clubFixtures || []), ...(nationalFixtures || [])];
		} catch (error) {
			return error;
		}
	},

	getPlayerClubFixtures: async function (playerId, from, to) {
		const token = wyscout.getToken();
		try {
			const response = await Promise.resolve(
				wyscout.getRequest(`/players/${playerId}/fixtures?fromDate=${moment(from).format('YYYY-MM-DD')}`, { token })
			);
			return response?.data?.matches || [];
		} catch (error) {
			return error;
		}
	},

	getTeamFixtures: async function (teamId, from, to) {
		const token = wyscout.getToken();
		try {
			const response = await Promise.resolve(
				wyscout.getRequest(
					`/teams/${teamId}/fixtures?fromDate=${moment(from).format('YYYY-MM-DD')}&toDate=${moment(to).format(
						'YYYY-MM-DD'
					)}`,
					{ token }
				)
			);
			return response?.data?.matches || [];
		} catch (error) {
			return error;
		}
	},

	getPlayerDetails: async function (playerId) {
		const token = wyscout.getToken();
		try {
			const response = await Promise.resolve(wyscout.getRequest(`/players/${playerId}`, { token }));
			return response?.data || {};
		} catch (error) {
			return error;
		}
	},

	filterAndMap: function (response, matches, from, to, future) {
		const filtered = response.data.matches.filter(({ date }) => moment(date).isBetween(moment(from), moment(to)));
		const countObj = countBy(filtered.map(({ label }) => label.split(', ')[0].split(' - ')[0]));
		const currentTeam = Object.keys(countObj).reduce((a, b) => (countObj[a] > countObj[b] ? a : b), '');
		if (future) {
			filtered.forEach(match => (match.label = match.label.split(',')[0]));
		}
		return matches.concat(
			filtered.map(game => {
				const home = game.label.split(', ')[0].split(' - ')[0];
				const away = game.label.split(', ')[0].split(' - ')[1];
				return {
					date: game.date,
					label: `${game.label}`,
					played: game.status === 'Played',
					matchId: game.matchId,
					competitionId: game.competitionId,
					team: !currentTeam || home === currentTeam ? home : away,
					opponent: !currentTeam || home === currentTeam ? away : home,
					home: currentTeam ? home === currentTeam : null,
					result: future ? null : game.label.split(', ')[1],
					location: home
				};
			})
		);
	},

	searchTeam: async function (team, byId) {
		const token = wyscout.getToken();
		try {
			let response;
			if (byId) {
				response = await wyscout.getRequest(`teams/${team}`, { token });
				response.data = [response.data];
			} else {
				response = await wyscout.getRequest(`search?objType=team&query=${team}`, { token });
			}
			if (!response.data || response.data.length === 0) response.data = [{ officialName: team, wyId: team }];
			return response.data;
		} catch (error) {
			return error;
		}
	},

	getTeamStatsForMatch: async function (teamWyId, matchWyId, token) {
		try {
			const response = await wyscout.getRequest(`/teams/${teamWyId}/matches/${matchWyId}/advancedstats`, { token });
			if (!response || !response.data) {
				throw InternalError('Received empty data');
			}
			return response.data;
		} catch (error) {
			console.error('[wyscout.getTeamStatsForMatch]', error);
			return null;
		}
	},

	getPlayersStatsForMatch: async function (playerWyId, matchWyId, token) {
		try {
			const response = await wyscout.getRequest(`players/${playerWyId}/matches/${matchWyId}/advancedstats`, { token });
			if (!response || !response.data) {
				throw InternalError('Received empty data');
			}
			return response.data;
		} catch (error) {
			console.error(error);
			return null;
		}
	},

	getMatchAdvancedPlayerStats: async function (matchWyId, token) {
		try {
			const response = await wyscout.getRequest(`matches/${matchWyId}/advancedstats/players?details=player`, { token });
			if (!response || !response.data) {
				throw InternalError('Received empty data');
			}
			return response.data?.players;
		} catch (error) {
			console.error(error);
			return [];
		}
	},

	getSecondaryTeamInfo: async function (_teamId, playerIds) {
		const responses = await Promise.map(
			playerIds || [],
			async plId => {
				return wyscout.getSecondaryTeamInfoDataAPI(_teamId, plId);
			},
			{ concurrency: 5 }
		);

		const parsed = responses
			.filter(item => !!item)
			.map(({ data }) => ({
				wyId: data.wyId,
				currentTeamId: data.currentTeamId,
				currentTeamName: data.currentTeam ? data.currentTeam.officialName : '',
				nationalTeamId: data.currentNationalTeamId
			}));
		return parsed;
	},

	getSecondaryTeamInfoDataAPI: async function (_teamId, playerId) {
		const token = wyscout.getToken();
		try {
			return await wyscout.getRequest(`/players/${playerId}?&details=currentTeam`, { token });
		} catch (error) {
			return null;
		}
	},

	syncSingleEventWithWyscout: async function (Event, eventInstance, teamWyscoutId, lineup, isNational) {
		// get basic match from wyscout
		const wyscoutToken = wyscout.getToken();
		const wyscoutEvent = await Event.app.models.Wyscout.getSingleMatch(eventInstance.wyscoutId, wyscoutToken);

		if (wyscoutEvent.status === 'Played' && wyscoutEvent.hasDataAvailable) {
			const basicTeamData = wyscoutEvent.teamsData[teamWyscoutId];

			// get advanced data from wyscout
			const [teamStats, allPlayersStats] = await Promise.all([
				wyscout.getTeamStatsForMatch(basicTeamData.teamId, eventInstance.wyscoutId, wyscoutToken),
				wyscout.getMatchAdvancedPlayerStats(eventInstance.wyscoutId, wyscoutToken)
			]);

			const [playersStats, opponentStats] = partition(
				allPlayersStats,
				({ player }) => player[isNational ? 'currentNationalTeamId' : 'currentTeamId'] === teamWyscoutId
			);

			// update match and event
			const updatedMatch = await wyscout.updateMatchWithWyscoutData(
				Event,
				eventInstance,
				wyscoutEvent,
				basicTeamData,
				lineup,
				teamStats,
				playersStats
			);
			if (!!updatedMatch && !!updatedMatch._playerStats) {
				eventInstance = await wyscout.updateEventWithWyscoutData(
					eventInstance,
					lineup,
					basicTeamData,
					wyscoutEvent,
					updatedMatch,
					opponentStats,
					Event
				);
			}
		}
		return eventInstance;
	},

	syncSingleClubEventWithWyscout: async function (Event, eventInstance, lineup) {
		const token = await wyscout.getToken();
		const wyscoutEvent = await Event.app.models.Wyscout.getSingleMatch(eventInstance.wyscoutId, token);
		if (wyscoutEvent.status === 'Played') {
			if (wyscoutEvent.hasDataAvailable) {
				const playersToSync = eventInstance._playerMatchStats
					.filter(({ enabled }) => enabled)
					.map(({ playerId }) => String(playerId));
				const lineupToSync = lineup
					.filter(({ id }) => playersToSync.includes(String(id)))
					.map(({ wyscoutId }) => wyscoutId);

				const allPlayersStats = await wyscout.getMatchAdvancedPlayerStats(eventInstance.wyscoutId, token);
				const playersStats = allPlayersStats.filter(({ playerId }) => lineupToSync.includes(playerId));

				const updatedMatch = await wyscout.updateMatchWithWyscoutData(
					Event,
					eventInstance,
					wyscoutEvent,
					null,
					lineup,
					null,
					playersStats
				);
				if (!!updatedMatch && !!updatedMatch._playerStats) {
					eventInstance = await wyscout.updateEventWithWyscoutData(
						eventInstance,
						lineup,
						null,
						wyscoutEvent,
						updatedMatch,
						[],
						Event
					);
				}
			} else {
				throw new wyscoutException();
			}
		}
		return eventInstance;
	},

	getClubMatchPlayersStatsAll: async function (Event, players, matchWyId, wyToken) {
		try {
			const playersWyIds = players.map(({ wyscoutId }) => wyscoutId).filter(x => x);
			const response = await Promise.map(
				playersWyIds,
				async playerWyId => {
					return await wyscout.getPlayersStatsForMatch(playerWyId, matchWyId, wyToken);
				},
				{ concurrency: 3 }
			);
			return response.filter(({ stack }) => !stack);
		} catch (e) {
			return e;
		}
	},

	getMatchPlayersStatsAll: async function (basicTeamData, matchWyId, wyToken) {
		const playersWyIds = [...basicTeamData.formation.lineup, ...basicTeamData.formation.bench].map(x => x.playerId);

		return await Promise.map(
			playersWyIds,
			async playerWyId => {
				return await wyscout.getPlayersStatsForMatch(playerWyId, matchWyId, wyToken);
			},
			{ concurrency: 2 }
		);
	},

	updateMatchWithWyscoutData: async function (
		Event,
		eventInstance,
		wyscoutEvent,
		basicTeamData,
		players,
		teamStats,
		playerStats
	) {
		return await Event.app.models.Match.updateMatchWithWyscoutData(
			eventInstance,
			wyscoutEvent,
			basicTeamData,
			players,
			teamStats,
			playerStats
		);
	},

	getUpdatedObjects: async function (type, token) {
		try {
			const response = await wyscout.getRequest(`/updatedobjects/?type=${type}`, {
				token
			});
			return response.data;
		} catch (error) {
			console.error('[WYSCOUT] ERROR', error);
			return [];
		}
	},

	// TODO add opponent
	updateEventWithWyscoutData: async function (
		event,
		players,
		basicTeamData,
		wyscoutEvent,
		updatedMatch,
		opponentStats,
		Event
	) {
		// resync playerMatchStats with updated match
		event._playerMatchStats = [];
		event._opponentPlayerMatchStats = opponentStats.map(stat => wrapOpponentMatchStats(stat, event));
		// players are the seasonal ones
		for (const player of players) {
			let newPlayerMatchStat = getEmptyMatchPlayerStat(player);
			const playerStat = updatedMatch._playerStats.find(({ playerId }) => playerId.toString() === player.id.toString());
			if (playerStat) {
				newPlayerMatchStat = wrapPlayerMatchStats(newPlayerMatchStat, playerStat, player, basicTeamData);
				// update rpeTl in the gps sessions
				const gpsSessionIndex = event._sessionPlayers.findIndex(
					({ mainSession, playerId }) => mainSession && playerId.toString() === playerStat.playerId.toString()
				);
				if (gpsSessionIndex !== -1) {
					event._sessionPlayers[gpsSessionIndex].rpeTl =
						(event._sessionPlayers[gpsSessionIndex].rpe || 0) * (playerStat.minutesPlayed || 0);
				}
			}
			event._playerMatchStats.push(newPlayerMatchStat);
		}

		// general match info
		event.wyscoutSynced = wyscoutEvent.hasDataAvailable;
		event.start = moment.utc(wyscoutEvent.dateutc).toDate();
		event.end = moment.utc(wyscoutEvent.dateutc).add(90, 'minutes').toDate();
		event.duration = getMaxGameDuration(event._playerMatchStats);
		event.title = wyscoutEvent.label;
		event.description = wyscoutEvent.label;
		event.where = wyscoutEvent.venue;
		event.home = basicTeamData && basicTeamData.side === 'home';
		event.result = wyscoutEvent.label.split(',')[1];
		event.resultFlag = wyscoutEvent.winner === 0 ? null : basicTeamData && wyscoutEvent.winner === basicTeamData.teamId;
		event.playerIds = event._playerMatchStats.filter(({ enabled }) => enabled).map(({ playerId }) => playerId);

		const updatedEvent = await Event.upsert(event);
		return updatedEvent;
	}
});

function getMaxGameDuration(stats) {
	return max((stats || []).map(({ minutesPlayed = 0 }) => Number(minutesPlayed))) || 90;
}

async function getTeamHistory(wyscoutId, token) {
	try {
		const response = await wyscout.getRequest(`/teams/${wyscoutId}/career?&details=team,competition,season'`, {
			token
		});
		return response && response.data && response.data.career ? response.data.career : [];
	} catch (error) {
		console.error('[WYSCOUT] ERROR', error);
		return [];
	}
}

async function getCompetitionPlayers(competitionId, token) {
	try {
		const response = await wyscout.getRequest(`/competitions/${competitionId}/players`, { token });
		return response.data && response.data.players ? response.data.players : [];
	} catch (error) {
		console.error('[WYSCOUT] ERROR', error);
		return [];
	}
}

async function getSquadSeasonPlayers(squadId, seasonId, token) {
	try {
		const response = await wyscout.getRequest(`/teams/${squadId}/squad${seasonId ? `?seasonId=${seasonId}` : ``}`, {
			token
		});
		return response.data && response.data.squad ? response.data.squad : [];
	} catch (error) {
		console.error('[WYSCOUT] ERROR', error);
		return [];
	}
}

function addElement(collection, competition) {
	if (competition && !collection.includes(competition)) {
		collection.push(competition);
	}
	return collection;
}

function getEmptyMatchPlayerStat(player) {
	return {
		id: uuid(),
		playerId: player.id,
		playerName: player.displayName,
		enabled: false,
		minutesPlayed: null,
		yellowCard: null,
		redCard: null,
		substituteInMinute: null,
		substituteOutMinute: null,
		score: null,
		assists: null,
		penalties: null,
		gkCleanSheets: null,
		fouls: null,
		successfulPasses: null,
		recoveries: null,
		gkSaves: null,
		goals: null,
		penaltiesConversion: null,
		yellowCards: null,
		redCards: null,
		directRedCards: null
	};
}

function wrapPlayerMatchStats(stat, playerStat, player, basicTeamData) {
	return {
		...stat,
		enabled: playerStat.minutesOnField > 0,
		score: playerStat.minutesOnField > 0 ? playerStat.goals : null,
		assists: playerStat.minutesOnField > 0 ? playerStat.assists : null,
		penalties: playerStat.minutesOnField > 0 ? playerStat.penalties : null,
		gkCleanSheets: playerStat.minutesOnField > 0 ? playerStat.gkCleanSheets : null,
		fouls: playerStat.minutesOnField > 0 ? playerStat.fouls : null,
		successfulPasses: playerStat.minutesOnField > 0 ? playerStat.successfulPasses : null,
		recoveries: playerStat.minutesOnField > 0 ? playerStat.recoveries : null,
		gkSaves: playerStat.minutesOnField > 0 ? playerStat.gkSaves : null,
		goals: playerStat.minutesOnField > 0 ? playerStat.goals : null,
		penaltiesConversion: playerStat.minutesOnField > 0 ? playerStat.penaltiesConversion : null,
		yellowCard: playerStat.yellowCards > 0,
		redCard: playerStat.redCards > 0,
		yellowCards: playerStat.yellowCards,
		redCards: playerStat.redCards,
		directRedCards: playerStat.directRedCards,
		minutesPlayed: playerStat.minutesOnField,
		...getSubstitutionsInfo(basicTeamData, player)
	};
}

function wrapOpponentMatchStats({ playerId, player, total }, { duration }) {
	return {
		id: uuid(),
		playerId,
		playerName: player?.shortName,
		downloadUrl: player?.imageDataURL,
		position: player?.role.code2.toUpperCase(),
		enabled: total.minutesOnField > 0,
		score: total.goals,
		assists: total.assists,
		penalties: total.penalties,
		gkCleanSheets: total.gkCleanSheets,
		fouls: total.fouls,
		successfulPasses: total.successfulPasses,
		recoveries: total.recoveries,
		gkSaves: total.gkSaves,
		goals: total.goals,
		penaltiesConversion: total.penaltiesConversion,
		yellowCard: total.yellowCards > 0,
		redCard: total.redCards > 0,
		yellowCards: total.yellowCards,
		redCards: total.redCards,
		directRedCards: total.directRedCards,
		minutesPlayed: total.minutesOnField,
		substituteOutMinute: total.matchesSubstituted ? total.minutesOnField : null,
		substituteInMinute: total.matchesComingOff ? duration - total.minutesOnField : null
	};
}

function getSubstitutionsInfo(basicTeamData, player) {
	if (basicTeamData && basicTeamData.formation && basicTeamData.formation.substitutions) {
		const substitutionIn = basicTeamData.formation.substitutions.find(x => x.playerIn === player.wyscoutId);
		const substitutionOut = basicTeamData.formation.substitutions.find(x => x.playerOut === player.wyscoutId);
		return {
			substituteInMinute: substitutionIn ? Number(substitutionIn.minute) : null,
			substituteOutMinute: substitutionOut ? Number(substitutionOut.minute) : null
		};
	}
	return null;
}

class wyscoutException {
	constructor() {
		this.statusCode = 400;
		this.code = 'WYSCOUT_NOT_SYNCED';
		this.name = 'WyscoutException';
		this.message =
			'It seems that this event is not complete yet on Wyscout. Please check again tomorrow or contact Wyscout.';
	}
}

async function wrapMatchForStandingsList(match, wyscoutTeamId, token) {
	const teamsIds = Object.keys(match.teamsData).map(id => Number(id));
	const opponentId = teamsIds[0] === wyscoutTeamId ? teamsIds[1] : teamsIds[0];
	const opponent = await wyscout.getTeamWithImage(opponentId, token);
	const myScore = moment().isBefore(moment(match.dateutc), 'second') ? '' : match.teamsData[wyscoutTeamId].score;
	const opponentScore = moment().isBefore(moment(match.dateutc), 'second') ? '' : match.teamsData[opponentId].score;
	return {
		wyId: match.wyId,
		matchInfo: match,
		goals: match.goals,
		team1: teamsIds[0],
		team2: teamsIds[1],
		gameweek: match.gameweek,
		side: match.teamsData[wyscoutTeamId].side,
		crest: opponent ? opponent.imageDataURL : null,
		label: opponent ? opponent.name : null,
		result:
			match.teamsData[wyscoutTeamId].side === 'home'
				? `${myScore} - ${opponentScore}`
				: `${opponentScore} - ${myScore}`,
		played: match.status,
		winner: match.winner === wyscoutTeamId ? 1 : match.winner
	};
}

function wrapMatchForStatsDetails(match, stats, goals) {
	const homeTeam = match.teamsData.home;
	const awayTeam = match.teamsData.away;
	return {
		home: {
			...match.teamsData.home.team,
			teamData: omit(match.teamsData.home, 'team'),
			teamStats: stats.find(({ teamId }) => String(teamId) === String(homeTeam.teamId))
		},
		away: {
			...match.teamsData.away.team,
			teamData: omit(match.teamsData.away, 'team'),
			teamStats: stats.find(({ teamId }) => String(teamId) === String(awayTeam.teamId))
		},
		match: {
			...match,
			goals
		}
	};
}
